<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>react-progressbar</title>

    <script src="//fb.me/react-0.12.0.js"></script>
    <script src="//fb.me/JSXTransformer-0.12.0.js"></script>
</head>
<body>
    <div id="content"></div>
    <div id="bar"></div>
    <script type="text/jsx">
        var ProgressBar = React.createClass({

            render: function() {

                var containerStyle = {
                    height: '10px'
                };

                var progressStyle = {
                    backgroundColor: this.props.color || '#0BD318',
                    width: ((this.props.completed.match(/\d+/)) ? this.props.completed : 0) + '%',
                    transition: 'width 200ms',
                    height: '10px'
                };

                return (
                    React.createElement("div", {className: "progressbar-container", style: containerStyle},
                        React.createElement("div", {className: "progressbar-progress", style: progressStyle}
                        )
                    )
                );
            }
        });

        var ProgressBarMenu = React.createClass({
            handleChange: function() {
                this.props.whenClick(
                    this.refs.filterTextInput.getDOMNode().value
                );
            },
            render: function() {
                return (
                    <p>
                    <form>
                        <input
                            type="text"
                            placeholder="Search..."
                            value={this.props.filterText}
                            ref="filterTextInput"
                            onChange={this.handleChange}
                        />
                    </form>
                    </p>
                );
            }
        });
        var ProgressTheBar = React.createClass({
            render: function () {
                var v = this.props.completed,
                    c = this.props.color;
                return (
                    <ProgressBar completed={v} color={c}></ProgressBar>
                )
            }
        });

        var ProgressBarContent = React.createClass({
            getInitialState: function() {
                return {completed: this.props.completed};
            },
            handleClick: function (completed) {
                this.setState({
                    completed: completed
                });
            },
            render: function () {
                return (
                    <div>
                        <ProgressBarMenu whenClick={this.handleClick} buttons={this.props.buttons}></ProgressBarMenu>
                        <ProgressTheBar completed={this.state.completed} color={this.props.color}></ProgressTheBar>
                    </div>
                )
            }
        });


        React.render(
            <ProgressBarContent completed="40" buttons="10,40,50,100" color="#eee"></ProgressBarContent>,
            document.getElementById('bar')
        );
    </script>
</body>
</html>
